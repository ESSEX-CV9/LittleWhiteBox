<body>
    <div class="wrap">
        <header>
            <h1>小白X - 公告与更新</h1>
        </header>
        <main>
            <section class="section" id="LATESTUPDATE">
                <h2>更新说明</h2>
                <div class="loading">

                    <h4>2025.9.28</h4>
                    <ul>
                        <li>增加剧情管理功能，详见文档</li>
                        <li>变量面板增加剧情管理的对应保护规则展示</li>
                        <li>增加循环任务动态导入函数</li>
                        <li>---</li>
                        <li>再次调整x按钮的显示位置...</li>
                        <li>拦截日志的样式和细微调整</li>
                        <li>小白X主菜单总开关的功能会根据上次保存了，并增加了回到默认功能的按钮</li>
                    </ul>

                    <div class="collapsible">
                        <input type="checkbox" id="toggle-2025820" class="toggle">
                        <label for="toggle-2025816" class="title">
                            <h4>2025.8.20</h4>
                        </label>
                        <ul class="content">
                            <li>新增预设绑定正则功能</li>
                            <li>新增预设提示更新，同样分作者端和用户端</li>
                            <li>---</li>
                            <li>优化次元壁相关画图及输出功能</li>
                            <li> 优化x按钮的显示位置，有时间戳在前面，无时间戳在后面</li>
                            <li> 优化沉浸布局的显示（小声说明，其实一直可以切换为传统多楼层和锁定多楼层的模式，分别是滚动显示楼层或固定只显示一个ai楼层）</li>
                        </ul>
                    </div>

                    <div class="collapsible">
                        <input type="checkbox" id="toggle-2025816" class="toggle">
                        <label for="toggle-2025816" class="title">
                            <h4>2025.8.16</h4>
                        </label>
                        <ul class="content">
                            <li>流式/xbgenraw增加了nonstream和bottomsys等4种参数</li>
                            <li>沉浸式模板增加了"不使用插件预设的正则/YAML/JSON解析器"的选项，可以自己监听流式文本自行解析啦</li>
                            <li>四次元壁（Meta 对话）支持18r图片（）</li>
                            <li>动态提示词支持非流和世界书，role结构换成了uau</li>
                        </ul>
                    </div>

                    <div class="collapsible">
                        <input type="checkbox" id="toggle-2025813" class="toggle">
                        <label for="toggle-2025813" class="title">
                            <h4>2025.8.13</h4>
                        </label>
                        <ul class="content">
                            <li>新增：流式静默生成（并发通道）</li>
                            <li>动态提示词/用户"文字指纹"分析 2.0</li>
                            <li>四次元壁（Meta 对话）全新模块</li>
                        </ul>
                    </div>
                </div>
            </section>
            <hr class="sysHR">

            <section class="section">
                <div>
                    <h3>详细说明文档:<a
                            href="https://docs.littlewhitebox.qzz.io/"
                            target="_blank" rel="noopener noreferrer">小白X 文档</a></h3>
                </div>
            </section>
            <hr class="sysHR">

            <section class="section">
                <h2>插件简介</h2>
                <div>
                    <div class="collapsible">
                        <input type="checkbox" id="toggle-xiaobai" class="toggle">
                        <label for="toggle-xiaobai" class="title">
                            <h3>小白X模板-消息渲染交互</h3>
                        </label>
                        <div class="content">
                            <h4>总开关</h4>
                            <ul>
                                <li>控制功能的总开关，并提供了代码块基础渲染功能</li>
                                <li>在基础渲染中，STscript()函数是一个异步函数，使用await STscript('/echo Hello World'); 可以执行酒馆命令</li>
                                <li>支持静默流式生成，使用/xbgen和/xbgenraw命令，支持(1-10)会话槽位的流式并发，使用window.parent.xiaobaixStreamingGeneration.getLastGeneration('槽位编号')获取流式内容
                                </li>
                            </ul>
                            <h4>沙盒模式</h4>
                            <ul>
                                <li>使用沙盒模式可以让iframe隔离酒馆的主窗口，使副窗口不能访问主窗口的函数</li>
                            </ul>
                            <h4>沉浸式模板</h4>
                            <ul>
                                <li>流式多楼层渲染</li>
                                <li>通过window.updateTemplateVariables(vars)获取流式输出的数据</li>
                            </ul>
                        </div>
                    </div>

                    <div class="collapsible">
                        <input type="checkbox" id="toggle-loop" class="toggle">
                        <label for="toggle-loop" class="title">
                            <h3>循环任务</h3>
                        </label>
                        <div class="content">
                            <ul>
                                <li>通过楼层数自动执行 STscript 和JS的混合多脚本，实现自动事件</li>
                                <li>支持 STscript 与内嵌 JavaScript (<<taskjs>>) 混合执行</li>
                                <li>可以选择五种触发时机：用户发送AI消息前/AI发送消息后/任意楼层生成后触发/仅在特定楼层触发/还有初始化-每次新开聊天时触发一次</li>
                                <li>快捷任务按钮：任务可注册为按钮，与快速回复(QR)显示在同一位置</li>
                            </ul>
                        </div>
                    </div>

                    <div class="collapsible">
                        <input type="checkbox" id="toggle-data" class="toggle">
                        <label for="toggle-data" class="title">
                            <h3>数据互动</h3>
                        </label>
                        <div class="content">
                            <h4>好感度统计</h4>
                            <ul>
                                <li>通过本地分析聊天内容，实时记录消息字数/频率统计，并计算为好感度注入 AI 提示词中。</li>
                                <li>好感度阶段完全自定义（名称、范围、阶段数）</li>
                            </ul>

                            <h4>动态提示词</h4>
                            <ul>
                                <li>智能分析：根据聊天内容自动生成针对性的提示词</li>
                                <li>两种模式：娱乐向：AI对用户文字指纹进行心理分析，生成个性化互动建议；实用向：根据剧情发展动态调整AI的输出风格</li>
                                <li>四次元壁（Meta 对话）："角色觉醒"/"皮下交流"两种角色并支持发图</li>
                            </ul>

                            <h4>变量面板</h4>
                            <ul>
                                <li>可视化查看/编辑/删除变量，文件夹分类管理</li>
                                <li>支持一键复制{{}}宏命令或getvar的酒馆命令</li>
                            </ul>
                        </div>
                    </div>

                    <div class="collapsible">
                        <input type="checkbox" id="toggle-tools" class="toggle">
                        <label for="toggle-tools" class="title">
                            <h3>辅助工具</h3>
                        </label>
                        <div class="content">
                            <h4>角色卡云端同步与更新提醒</h4>
                            <ul>
                                <li>作者端：作者端：绑定角色卡发布更新说明（支持 Discord / Rentry 链接）</li>
                                <li>用户端：角色卡有更新时自动提示</li>
                            </ul>
                            <h4>消息日志</h4>
                            <ul>
                                <li>查看消息的结构，帮助你调试角色预设、提示、格式化标记、世界书深度等内容</li>
                                <li>长按三秒后红色持续拦截模式，可将所有发往AI的请求都会被拦截（包括前端经由酒馆处理的文本，如/gen）、以log形式弹窗显示，再次长按五秒后关闭</li>
                            </ul>
                            <h4>写卡助手</h4>
                            <ul>
                                <li>写卡助手会为酒馆注入特定提示词，使AI可以访问小白X 插件功能描述与完整的STscript语言（斜杠命令）文档。</li>
                            </ul>
                            <h4>视觉增强</h4>
                            <ul>
                                <li>沉浸式显示布局：（宽屏 UI 美化）</li>
                                <li>Wallhaven 背景图功能：根据AI消息内容，按消息楼层自动为聊天插入一张匹配主题的背景图。</li>
                            </ul>
                        </div>
                    </div>

            </section>
        </main>
    </div>
</body>
